// 6. class - ì†ì„±fields + (í–‰ë™methods)
// ì†ì„±ë§Œ ìˆì„ ìˆ˜ë„ ìˆë‹¤-> ë°ì´í„° í´ë˜ìŠ¤ë¼ í•¨

//í´ë˜ìŠ¤ ì–´ì°Œê³ ë“¤ì´ ì¼ì–´ë‚˜ëŠ”ê²Œ ê°ì²´ì§€í–¥ ì–¸ì–´

// class -template, declare once, no data in
// object -instance of a class, created many times,data in

'use strict';

// object-oriented programming
// class: template
// object: instance of a class

// js classes 
// - introduced in ES6, ë„ì… ì–¼ë§ˆ ì•ˆë¨
// - ë„ì… ì „ì—” í´ë˜ìŠ¤ ì •ì˜ ì•ˆí•˜ê³  ê°ì²´ ë§Œë“¬
// - syntactical sugar over prototype-based interitance

// 1. class declarations
class person {
  // constructor ìƒì„±ìë¡œ í•„ìš”í•œ ë°ì´í„° ì „ë‹¬
  constructor(name, age) {
    //fields ì»¨ìŠ¤íŠ¸ëŸ­í„°ì— ì „ë‹¬ëœ ë°ì´í„°ë¥¼ í•„ì¦ˆì— í• ë‹¹
    this.name = name;
    this.age = age;
  }

  // methods
  speak() {
    console.log(`${this.name}: hello!`);
  }
}

const ellie = new person('ellie', 20);
console.log(ellie.name);
console.log(ellie.age);
ellie.speak();



// 2. getter and setters
// ë­ ì»¤í”¼ ì£¼ë¬¸ì‹œ ì²˜ìŒ ìˆ˜ëŸ‰ì´ -1ì”ì´ë¼ê³  ì„¤ì •í•˜ë¯„ ë§ ì•ˆë˜ëŠ”ë° ê·¸ê±¸ 0ìœ¼ë¡œ ëŒë ¤ì¤€ëŒ€
class user {
  constructor(firstName, lastName, age) {
    this.firstName = firstName;
    this.lastName = lastName;
    this.age = age;
  }
  get age() {
    return this._age;
  }

  set age(value) { // ê´„í˜¸ ì•ˆ ë‘ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ì¡°ì • ê°€ëŠ¥. ì—ëŸ¬ ë„ìš°ê±°ë‚˜ 0ìœ¼ë¡œ ë³´ì—¬ì£¼ê±°ë‚˜
    // if (value < 0) {
    //   throw error('age can not be negative');
    //}  
    this._age = value < 0 ? 0 : value;
  }
}

const user1 = new user('steve', 'jobs', -1);
console.log(user1.age);



// 3.fields (public, private)
// too soon! ê²ë‚˜ ìµœê·¼ì— ì¶”ê°€ë˜ì–´ì„œ ë§ì´ ì“°ì§€ëŠ” ì•Šì•„(2ë…„ì „ì´ë¼ ì´ì   ìµœê·¼ë„ ì•„ë‹ˆêµ°..)
class Experiment {
  publicField = 2;
  #privateField = 0;
}
const experiment = new Experiment();
console.log(experiment.publicField);
console.log(experiment.privateField);
// ì§€ê¸ˆ ì“°ê¸°ì—” ì´ë¥´ê³  ì“°ë ¤ë©´ ë°”ë²¨ì„ ì¨ì•¼í•œë‹¤...ë¨¼ë§



// 4. static properties and methods -> ë‹¤ì‹œ í˜¹ì€ ë‹¤ë¥¸ ê³³ì—ì„œ ì°¾ì•„ë´ë¼
class Article {
  static publisher = 'Dream Coding';
  constructor(articleNumber) {
    this.articleNumber = articleNumber;
  }

  static printPublisher() {
    console.log(Article.publisher);
  }
}

const article1 = new Article(1);
const article2 = new Article(2);
console.log(Article.publisher);
Article.printPublisher();


// 5. inheritance
// a way for one cllass to extend another class.
class Shape {
  constructor(width, height, color) {
    this.width = width;
    this.height = height;
    this.color = color;
  }

  draw() {
    console.log(`drawing ${this.color} color of`);
  }

  getArea() {
    return this.width * this.height;
  }
}

// Rectangleí´ë˜ìŠ¤ ë§Œë“¤ ë–„ ì´ë ‡ê²Œ ì“°ë¯„ ìë™ìœ¼ë¡œ ìœ„ì˜ í´ë˜ìŠ¤ê°€ í¬í•¨ë¨
class Rectangle extends Shape {}
// ì‚¼ê°í˜•ì€ ë„“ì´ êµ¬í•˜ëŠ” ê³µì‹ ë‹¤ë¥´ë‹ˆ ê·¸ ì •ë³´ë¥¼ ë®ì–´ì”Œì›Œë³¸ë‹¤ : overriding
// drawí•¨êµ¬ëŠ” ë¶€ëª¨êº¼ë‘ ê°™ì´ ë¶ˆëŸ¬ë³´ì
class Triangle extends Shape {
  draw() {
    super.draw();
    console.log('ğŸ”º');
  }
  getArea() {
    return (this.width * this.height) / 2;
  }
}

// ìœ—ë§ì´ ë§ëŠ”ì§€ ë³´ì. Rectangleë¶ˆëŸ¬ë³¸ë‹¤
const rectangle = new Rectangle(20, 20, 'blue');
rectangle.draw();
console.log(rectangle.getArea());

const triangle = new Triangle(20, 20, 'red');
triangle.draw();


// 6.class checking: instanceOf(ì•ì˜ ê²ƒì€ ë’¤ì˜ ê²ƒì˜ ì¸ìŠ¤í„´ìŠ¤ì¸ê°€ìš”?)
console.log(rectangle instanceof Rectangle); // T
console.log(triangle instanceof Rectangle); // F
console.log(triangle instanceof Triangle); // T
console.log(triangle instanceof Shape); // T
console.log(triangle instanceof Object); // T

---------------------------------7-------------------------------

//objects
// one of the js's data types.
// a collection of related data and/or functionality.
// nearly all objects in js are intances of object
// obj = { key : value };

// 1.literals and properties
// objë§Œë“œëŠ” ë°©ë»¡2
// const obj1 = {}; // 'object ì •í™•í•œliteralë°ì´í„° ê·¸ ìì²´' syntax
// const obj2 = new Object(); // 'object constructorìƒì„±ì' syntax

// function print(name, age) {
//   console.log(person.name);
//   console.log(person.age);
// }

const ellie = {name: 'ellie', age: 4};
// print(ellie);

// with js magic (dynamically typed language)
// can add properties later
// ellie.hasJob = true;
// console.log(ellie.hasJob);

// can delete properties later
// delete ellie.hasjob;


// 2. conputed properties
// key should be always string
//í”„ë¡œí¼í‹° ì ‘ê·¼ ë°©ë²•
// console.log(ellie.name); // ë¬¸ë²•ì„ í†µí•´ ì ‘ê·¼-> ì›ë˜ëŠ” ì´ê²Œ ë§ë‹¤. í•„ìš” í‚¤ë¥¼ ì•Œ ë•Œ
// console.log(ellie['name']); // ë³€ìˆ˜ë¥¼ ìŠ¤íŠ¸ë§ í˜•íƒœë¡œ ì ‘ê·¼ ->ì •í™•íˆ ì–´ë–¤ í‚¤ í•„ìš”í•œì§€ ëª¨ë¥¼ ë•Œ
// ellie['hasJob'] = true;
// console.log(ellie.hasJob);

// ì˜ˆ. ë™ì ìœ¼ë¡œ í‚¤ì— ê´€ë ¨í•œ ë°¸ë¥˜ ë°›ì•„ì™€ì•¼ í•  ë•Œ ì“¸ ìˆ˜ ìˆë‹¤....ì•„ ë¨¼ë§ì´ëƒ
// function printValue(obj, key) {
//   console.log(obj[key]);
// }

// printValue(ellie, 'name');
// printValue(ellie, 'age');




// 3. property value shorthand
// ìƒˆë¡œ ë§Œë“¤ í•¨ìˆ˜ì˜ í‚¤ì™€ ë°¸ë¥˜ê°€ ë™ì¼í•˜ë©´ ìƒëµ ê°€ëŠ¥
const person1 = { name: 'bob', age: 2 };
const person2 = { name: 'steve', age: 3 };
const person3 = { name: 'dave', age: 4 };
const person4 = new Person('ellie', 30);
console.log(person4);



// 4. constructor function
function Person(name, age) { // ìˆœìˆ˜í•˜ê²Œ obj ë§Œë“œëŠ” í•¨ìˆ˜ëŠ” ëŒ€ë¬¸ìë¡œ ì‹œì‘
  // this = {};
  this.name = name;
  this.age = age;
  // return this;
}


// 5. in operator: property existence check (key in obj)
console.log('name' in ellie); // í‚¤ê°€ ìˆëŠ”ì§€ ì—†ëŠ”ì§€ í™•ì¸
console.log(ellie.name);

// 6. for..in vs for..of
// for (key in obj)
console.clear();
for (key in ellie) {
  console.log(key);
}

// for (value of iterable)
const array = [1, 2, 4, 5];
for (value of array) {
  console.log(value);
}


// 7. fun cloning
// object.assign(dest, [obj1, obj2, obj3...])
const user = { name: 'ellie', age: '20' };
const user2 = user;
user2.name = 'coder';
console.log(user);

// old way
const user3 = {};
for (key in user) {
  user3[key] = user[key];
}
console.clear(); // ìœ„ ê¸°ë¡ì„ ì§€ìš´ë‹¤ëŠ”ë° vsì—ì„  ì•ˆë˜ëŠ”ë“¯?
console.log(user3);

const user4 = Object.assign({}, user);
console.log(user4);

// another example
const fruit1 = {color: 'red'};
const fruit2 = { color: 'blue', size: 'big' };
const mixed = Onject.assign({}, fruit1, fruit2);
console.log(mixed.color); // ë’¤ì— ë‚˜ì˜¤ëŠ” ì• ê°€ ë®ì–´ì„œ fruit2ì˜ ìƒ‰
console.log(mixed.size);


-----------------------8, 9-------------------------------------


'use strict'
// í”Œì ì„ í•  ë•Œ arrayë¥¼ ì•ˆ ì“´ì  ì—†ë‹¤! ê·¸ë§Œí¼ ë§ì´ ì”€

// array ì²«ë²ˆì§¸ ìë£Œêµ¬ì¡°ë‹¤

// 1. reclaration
const arr1 = new Array();
const arr2 = [1, 2];

// 2. index position
const fruits = ['ğŸ¾', 'ğŸ·'];
console.log(fruits);
console.log(fruits.length);
console.log(fruits[0]);
console.log(fruits[1]);
console.log(fruits[2]);



// 3. looping over an array
// print all fruits

// a. for
for (let i = 0; i < fruits.length; i++) {
  console.log(fruits[i]);
}

// b. for of
for (let fruit of fruits) { 
  console.log(fruit);
}

// c. forEach
fruits.forEach(function (fruit) {
  console.log(fruit);
});

// cë¥¼ ìì„¸íˆ ì¨ë³´ì
fruits.forEach(function (fruit, index) {
  console.log(fruit, index);
});

// d. forEach + arrow function
fruits.forEach((fruit) => console.log(fruit));



// 4. addition, deletion, copy
// push: add an item to the end
fruits.push('ğŸ¸', 'ğŸº');
console.log(fruits);

// pop: remove an item from the end
fruits.pop();
console.log(fruits);

// add an item to the beginning
fruits.unshift('ğŸ¹', 'ğŸº');
console.log(fruits);

// shift: remove an item from the beginning
fruits.shift();
console.log(fruits);

// note!! (un)shift are slower than pop, push
// ì•ì—ì„œ ë°ì´í„° ë„£ê³  ë¹¼ë ¤ë©´ ë‹¤ë¥¸ ë°ì´í„°ë“¤ì„ ë’¤ë¡œ/ì•ìœ¼ë¡œ ì˜®ê²¨ì•¼í•˜ê¸° ë•Œë¬¸
// remove an item by index position
fruits.push('ğŸ¥©', 'ğŸœ', 'ğŸ¢');
console.log(fruits);

// fruits.splice(1); -> ì²«ë²ˆì§¸ë§Œ ì“°ë©´ ì´ ë²ˆí˜¸ ì´ìƒì˜ ì¸ë±ìŠ¤ ë‹¤ ì§€ì›€. ì¦‰ 0ë²ˆ í•œê°œë§Œ ë‚˜ì˜´
fruits.splice(1, 1);
console.log(fruits);

fruits.splice(1, 1, 'ğŸ«•', 'ğŸ©'); // 1ë²ˆ ì¸ë±ìŠ¤ë¶€í„° 1ê°œ ì§€ìš°ê°€ ë’¤ì˜ ê²ƒë“¤ ë„£ì–´
console.log(fruits);

// combine two arrays
const fruits2 = ['ğŸ•', 'ğŸ”'];
const newFruits = fruits.concat(fruits2);
console.log(newFruits);



// 5. searching
// find the index
// indexOf: find the index
// includes
console.clear();
console.log(fruits);
console.log(fruits.indexOf('ğŸ©')); // ì¸ë±ìŠ¤ ëª‡ë²ˆì— ìˆëŠëƒ
console.log(fruits.indexOf('ğŸ¿ï¸')); // ì—†ëŠ”ê±° ì°¾ìœ¼ë©´ -1ë‚˜ì™€
console.log(fruits.includes('ğŸ©')); // í¬í•¨í•˜ê³  ìˆëƒ?

// lastIndexOf
fruits.push('ğŸº');
console.log(fruits);
console.log(fruits.indexOf('ğŸº'));  //ì¤‘ë³µì´ë©´ ì²«ë²ˆì§¸ ë‚˜ì˜¤ëŠ” ì• êº¼ ë‚˜ì˜´
console.log(fruits.lastIndexOf('ğŸº'));



// 6. js apië“¤ ì–´ë–»ê²Œ ì“°ëŠ”ê±´ì§€ ì½ê³  ì¨ë³´ë¼í–ˆëŠ”ë° ê·€ì°®ê³  ì§œì¦ì´ë¼ ê·¸ëƒ¥ ì •ì˜ ì½ê¸°ë§Œ í–ˆë‹¤ 


---------------------------10----------------------------


// json
// js obj notation
// ë‘ê°€ì§€ë§Œ í™•ì‹¤íˆ ì•Œì•„ë³´ì json <-> obj

// 1. obj to json
// stringfy(obj)
let json = JSON.stringify(true);
console.log(json); // true

//ë°°ì—´ì„ jsonìœ¼ë¡œ ë³€í™˜
json = JSON.stringify(['apple', 'banana']);
console.log(json); // ["apple","banana"]


const rabbit = {
  name1: 'tori',
  color: 'white',
  size: null,
  birthDate: new Date(),
  jump: () => {
    console.log(`${name1} can jump!`);
  },
}

json = JSON.stringify(rabbit);
console.log(json); // {"name1":"tori","color":"white","size":null,"birthDate":"2022-12-07T13:41:36.360Z"}

json = JSON.stringify(rabbit, ["name1"]); 
console.log(json); // {"name1":"tori"}

json = JSON.stringify(rabbit, (key, value) => {
  console.log(`key: ${key}, value: ${value}`);
  return value;
}); 
console.log(json); // ëª¨ë“  í‚¤ì™€ ë°¸ë¥˜ë“¤ ì „ë‹¬ë¨
// ì²«ë²ˆì§¸ëŠ” key: , value: [object Object]



// 2. json to obj
// parse(json)
json = JSON.stringify(rabbit);
console.log(json); // jsonìì²´ê°€ ì–´ì¼€ ìƒê²¼ëŠ”ì§€ ë´ë¼

// const obj = JSON.parse(json); // jsonì„ objë¡œ
// console.log(obj); // ì¶œë ¥í•´ë³¸ë‹¤
// rabbit.jump(); //name1 is not defined
// obj.jump(); // obj.jump is not a function
// ìœ„ ì´ìœ : ìŠ¤íŠ¸ë§ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ jsonìœ¼ë¡œë¶€í„° ë§Œë“¤ì–´ì§€ë¯€ë¡œ í•¨ìˆ˜ëŠ” ì‹œë¦¬ì–¼ë¼ì´ì¦ˆ ì•ˆë˜ì–´ ì „ë‹¬ ì•ˆë¨

// console.log(rabbit.birthDate.getDate()); // ì˜¤ëŠ˜ ë‚ ì§œ
// // rabbitì˜¤ë¸Œì œ ì•ˆì˜ birthDateí•¨ìˆ˜ëŠ” dateí•¨ìˆ˜ë¼ì„œ ê·¸ ê³„ì—´ì˜ apiì“¸ ìˆ˜ ìˆ
// console.log(obj.birthDate.getDate()); // ì—ëŸ¬
// // jsonìœ¼ë¡œë¶€í„° ë§Œë“  objì˜ birthDateì¶œë ¥í•˜ë¯„ ì—ëŸ¬ë‚¨
// // ì´ìœ : birthDateê°€ ìŠ¤íŠ¸ë§ì´ë¼ì„œ.jsonìœ¼ë¡œ ë§Œë“  ë°ì´í„° ìì²´ì— ìˆëŠ” stringì´ objì— í• ë‹¹ëœ ê²ƒ

// ------------ìœ„ë¥¼ ê³ ì¹œê²Œ ë°‘------------------

// ê·¸ë˜ì„œ ìœ„ë¥¼ ì„¸ë°€í•˜ê²Œ ë­ ë³€í™˜í•˜ê³ í”„ë¯„ ì½œë°± ì¨
// ìœ„ëŠ” ì¤‘ë³µìœ¼ë¡œ, ì£¼ì„ì²˜ë¦¬í•¨, ìƒˆë¡œ ì •ì˜í•´ì•¼í•¨
const obj = JSON.parse(json, (key, value) => {
  console.log(`key: ${key}, value: ${value}`);
  return key === 'birthDate' ? new Date(value) : value;
}); // ì´ëŸ¬ë¯„ ëª¨ë“  í‚¤ì™€ ë°¸ë¥˜ ë‚˜ì˜´

console.log(rabbit.birthDate.getDate()); 
console.log(obj.birthDate.getDate()); // ìœ„ì—ì„œ ì•ˆëœê±° ë¨


